@model X.PagedList.IPagedList<HotelManagement.Models.Entities.Payment>

@using HotelManagement.Helper
@{
    ViewData["Title"] = "Payments";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/payments-index.css" />

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-primary mb-0">💲Payments</h2>
    </div>

    <!-- 🔹 Desktop Table -->
    <div class="payments-table-desktop">
        @if (Model != null && Model.Any())
        {
            <div class="table-responsive shadow-sm">
                <table class="table table-striped table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>Payment ID</th>
                            <th>Date</th>
                            <th>Invoice No</th>
                            <th>Type</th>
                            <th>Reference</th>
                            <th class="text-end">Amount</th>
                            <th style="width: 160px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var payment in Model)
                        {
                            <tr>
                                <td>@payment.ID</td>
                                <td>@payment.Date.ToString("dd MMM yyyy")</td>
                                <td>@payment.InvoiceNo</td>
                                <td>@EnumHelper.GetDisplayName(payment.Type)</td>
                                <td>@(payment.Reference ?? "-")</td>
                                <td class="text-end fw-bold">@payment.Amount.ToString("N2")</td>
                                <td>
                                    @* Actions can be added here if needed *@
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="alert alert-info">
                No payments found.
            </div>
        }
    </div>

    <!-- 🔹 Mobile Card Layout -->
    <div class="payments-table-mobile">
        @if (Model != null && Model.Any())
        {
            @foreach (var payment in Model)
            {
                <div class="payment-card">
                    <div class="payment-card-header">
                        <h6 class="payment-card-title">Payment #@payment.ID</h6>
                        <div class="payment-card-amount">@payment.Amount.ToString("N2")</div>
                    </div>
                    <div class="payment-card-body">
                        <div class="payment-card-row">
                            <div class="payment-card-label">Date</div>
                            <div class="payment-card-value">@payment.Date.ToString("dd MMM yyyy")</div>
                        </div>
                        <div class="payment-card-row">
                            <div class="payment-card-label">Invoice No</div>
                            <div class="payment-card-value">@payment.InvoiceNo</div>
                        </div>
                        <div class="payment-card-row">
                            <div class="payment-card-label">Type</div>
                            <div class="payment-card-value">@EnumHelper.GetDisplayName(payment.Type)</div>
                        </div>
                        @if (!string.IsNullOrWhiteSpace(payment.Reference))
                        {
                            <div class="payment-card-row full-width">
                                <div class="payment-card-label">Reference</div>
                                <div class="payment-card-value">@payment.Reference</div>
                            </div>
                        }
                    </div>
                </div>
            }
        }
        else
        {
            <div class="text-center text-muted py-5">
                <i class="bi bi-inbox fs-1"></i>
                <p class="mt-3 fs-5">No payments found.</p>
            </div>
        }
    </div>
</div>
@await Html.PartialAsync("_Pagination", Model)