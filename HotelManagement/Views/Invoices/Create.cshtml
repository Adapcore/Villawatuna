@model HotelManagement.Models.ViewModels.CreateInvoiceViewModel

@{
    ViewData["Title"] = "Create Invoice";
    var invoiceType = ViewBag.InvoiceType ?? "Other"; // coming from query string

}
<div class="container mt-4">
    <h2>Create Invoice</h2>

    <form id="invoiceForm" method="post">
        <div class="row mb-3">
            <div class="col-md-6">
                <label asp-for="Date" class="form-label">Date</label>
                <input asp-for="Date" class="form-control" type="date" />
                <span asp-validation-for="Date" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="Type" class="form-label">Invoice Type</label>
                <input asp-for="Type" class="form-control" hidden />
                <input type="text" id="InvoiceTypeName" class="form-control" value="@ViewBag.InvoiceTypeName" readonly />
                <span asp-validation-for="Type" class="text-danger"></span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label asp-for="ReferenceNo" class="form-label">Reference No</label>
                <input asp-for="ReferenceNo" class="form-control" />
                <span asp-validation-for="ReferenceNo" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="CustomerId" class="form-label">Customer</label>
                <select asp-for="CustomerId" class="form-select" asp-items="ViewBag.Customers">
                    <option value="">-- Select Customer --</option>
                </select>
                <span asp-validation-for="CustomerId" class="text-danger"></span>
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="Note" class="form-label">Notes</label>
            <textarea asp-for="Note" class="form-control" rows="3"></textarea>
            <span asp-validation-for="Note" class="text-danger"></span>
        </div>

        <hr />

        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">Sub Total</label>
                <input type="text" id="subTotal" class="form-control" value="0.00" readonly />
            </div>
            <div class="col-md-4">
                <label class="form-label">Service Charge</label>
                <input type="text" id="serviceCharge" class="form-control" value="0.00" readonly />
            </div>
            <div class="col-md-4">
                <label class="form-label">Gross Amount</label>
                <input type="text" id="grossAmount" class="form-control" value="0.00" readonly />
            </div>
        </div>

        <hr />

        <h4>Invoice Items</h4>
        <table id="invoiceItems" class="table table-bordered">
            <thead>
                <tr>
                    <th>Item Id</th>
                    <th>Description</th>
                    <th>Note</th>
                    <th style="width:100px;">Qty</th>
                    <th style="width:150px;">Unit Price</th>
                    <th style="width:150px;">Amount</th>
                    <th style="width:50px;"></th>
                </tr>
            </thead>
            <tbody>
                <!-- JS will dynamically add rows here -->
            </tbody>
        </table>
        <button type="button" id="addItemBtn" class="btn btn-primary btn-sm">Add Item</button>

        <hr />
        <button id="btnCreateInvoice" type="button" class="btn btn-success">Create Invoice</button>
        <a asp-action="Index" class="btn btn-secondary">Cancel</a>
    </form>
</div>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>


<head>
    <script src="~/js/invoice.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var obj = [];
            obj.serviceChargeRate = 0.1;
            var invoice = $().invoice(obj);
        });
    </script>
    @*  <script>
    $(function () {
    $("#invoiceContainer").invoice({
    serviceChargeRate: 0.1, // 10%
    createUrl: "@Url.Action("Create", "Invoice")"
    });
    });
    </script> *@
</head>
