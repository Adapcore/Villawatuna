@model Invoice

@{
    ViewBag.Title = "Print Invoice";
}

<div class="container mt-4" id="invoiceContainer">
    <div class="text-center mb-3">
        <h3 class="fw-bold">My Hotel / Restaurant</h3>
        <p>Address Line 1 | Address Line 2</p>
        <p>Phone: 0123-456789</p>
    </div>

    <hr />

    <div class="row mb-3">
        <div class="col-6">
            <strong>Invoice No:</strong> @Model.InvoiceNo<br />
            <strong>Date:</strong> @Model.Date.ToString("yyyy-MM-dd")<br />
            <strong>Status:</strong> @Model.Status
        </div>
        <div class="col-6 text-end">
            <strong>Customer:</strong> @Model.Customer?.FirstName @Model.Customer?.LastName<br />
            <strong>Reference No:</strong> @Model.ReferenceNo
        </div>
    </div>

    <div class="mb-3">
        <strong>Note:</strong> @Model.Note
    </div>

    <table class="table table-bordered table-sm text-center">
        <thead class="table-light">
            <tr>
                <th>Item</th>
                <th>Description</th>
                <th>Note</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var detail in Model.InvoiceDetails)
            {
                <tr>
                    <td>@detail.ItemId</td>
                    <td>@detail.MenuItem?.Name</td>
                    <td>@detail.Note</td>
                    <td>@detail.Quantity</td>
                    <td>@detail.UnitPrice.ToString("F2")</td>
                    <td>@detail.Amount.ToString("F2")</td>
                </tr>
            }
        </tbody>
    </table>

    <div class="row mt-3">
        <div class="col-6 offset-6">
            <div class="d-flex justify-content-between">
                <strong>Subtotal:</strong>
                <span>@Model.SubTotal.ToString("F2")</span>
            </div>
            <div class="d-flex justify-content-between">
                <strong>Service Charge:</strong>
                <span>@Model.ServiceCharge.ToString("F2")</span>
            </div>
            <hr />
            <div class="d-flex justify-content-between fw-bold">
                <strong>Gross Total:</strong>
                <span>@Model.GrossAmount.ToString("F2")</span>
            </div>
        </div>
    </div>

    <div class="text-center mt-4">
        <p>Thank you for your business!</p>
    </div>
</div>

<div class="text-center mt-3 no-print">
    <button onclick="printInvoice()" class="btn btn-success">
        <i class="bi bi-printer"></i> Print Invoice
    </button>
</div>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

<style>
/* POS-friendly printing */
@@media print {
    body * {
        visibility: hidden;
    }

    #invoiceContainer, #invoiceContainer * {
        visibility: visible;
    }

    #invoiceContainer {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        font-size: 12pt;
    }

    .no-print {
        display: none;
    }

    table th, table td {
        padding: 4px;
    }
}
</style>

<script>
function printInvoice() {
    window.print();
}
</script>
